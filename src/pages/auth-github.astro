---
import Layout from "../layouts/Layout.astro";
---

<Layout pageTitle="Connexion">
  <button id="connect-github">Se connecter avec github</button>
</Layout>

<script>
  import { pb } from "../backend";

  document
    .getElementById("connect-github")
    ?.addEventListener("click", async () => {
      const authData = await pb
        .collection("users")
        .authWithOAuth2({ provider: "github" });
      document.cookie = pb.authStore.exportToCookie({httpOnly: false});
      document.location.href = "/auth-password/";
    });
</script>
